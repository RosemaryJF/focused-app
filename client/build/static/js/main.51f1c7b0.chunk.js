(this["webpackJsonpfocused-app"]=this["webpackJsonpfocused-app"]||[]).push([[0],{75:function(e,n,t){},80:function(e,n,t){"use strict";t.r(n);var o=t(1),i=t.n(o),r=t(65),c=t.n(r),a=(t(75),t(26)),s=t(15),l=t(6),d=t(69),u=t(90),j=t(92),h=t(89),b=t(67),g=t(27),f=t(28),m=t(56),O=t.n(m),x=new(function(){function e(){Object(g.a)(this,e)}return Object(f.a)(e,[{key:"getProfile",value:function(){return O()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return O()(e).exp<Date.now()/1e3}catch(n){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),p=t(4);var v,w,k,$=function(){return{showSiteEntry:function(){return x.loggedIn()?Object(p.jsx)("div",{id:"homeSignedIn",children:Object(p.jsx)(s.b,{to:"/profile",children:Object(p.jsx)("button",{colorScheme:"#C58940",variant:"outline",children:"Profile"})})}):Object(p.jsxs)("div",{id:"homeNotSignedIn",children:[Object(p.jsx)(s.b,{to:"/signup",children:Object(p.jsx)("button",{colorScheme:"#C58940",variant:"outline",children:"Signup"})}),Object(p.jsx)(s.b,{to:"/login",children:Object(p.jsx)("button",{colorScheme:"#C58940",variant:"outline",children:"Login"})})]})}}},S=function(){return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h1",{id:"welcome",children:"Ready to get focused?"}),Object(p.jsx)($,{})]})},y=(t(11),t(8),t(13),t(9),t(93),t(53)),N=t(91);Object(N.a)(v||(v=Object(y.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),Object(N.a)(w||(w=Object(y.a)(["\n  mutation addDay(\n    $user: ID!\n    $dayDate: Day\n    $climb: ID!\n    $focus: String!\n    $attempts: Number!\n    $rests: Number\n    $beta: String!\n    $notes: String!\n  ) {\n    addDay(\n      user: $user\n      # dayDate\n      climb: $climb\n      crag: $crag\n      focus: $focus\n      attempts: $attempts\n      rests: $rests\n      beta: $beta\n      notes: $notes\n    )\n  }\n"]))),Object(N.a)(k||(k=Object(y.a)(["\n  mutation addUser(\n    $firstName: String!\n    $lastName: String!\n    $email: String!\n    $password: String!\n  ) {\n    addUser(\n      firstName: $firstName\n      lastName: $lastName\n      email: $email\n      password: $password\n    ) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"])));var I=function(){return Object(p.jsxs)("header",{className:"flex-row px-1",children:[Object(p.jsx)("h1",{children:Object(p.jsxs)(s.b,{to:"/",children:[Object(p.jsx)("span",{role:"img","aria-label":"shopping bag",children:"\ud83d\udecd\ufe0f"}),"-Shop-Shop"]})}),Object(p.jsx)("nav",{children:x.loggedIn()?Object(p.jsxs)("ul",{className:"flex-row",children:[Object(p.jsx)("li",{className:"mx-1",children:Object(p.jsx)(s.b,{to:"/orderHistory",children:"Order History"})}),Object(p.jsx)("li",{className:"mx-1",children:Object(p.jsx)("a",{href:"/",onClick:function(){return x.logout()},children:"Logout"})})]}):Object(p.jsxs)("ul",{className:"flex-row",children:[Object(p.jsx)("li",{className:"mx-1",children:Object(p.jsx)(s.b,{to:"/signup",children:"Signup"})}),Object(p.jsx)("li",{className:"mx-1",children:Object(p.jsx)(s.b,{to:"/login",children:"Login"})})]})})]})},D=Object(d.a)({uri:"/graphql"}),W=Object(b.a)((function(e,n){var t=n.headers,o=localStorage.getItem("id_token");return{headers:Object(a.a)(Object(a.a)({},t),{},{authorization:o?"Bearer ".concat(o):""})}})),C=new u.a({link:W.concat(D),cache:new j.a});var E=function(){return Object(p.jsx)(h.a,{client:C,children:Object(p.jsx)(s.a,{children:Object(p.jsxs)("div",{children:[Object(p.jsx)(I,{}),Object(p.jsx)(S,{}),Object(p.jsx)(l.c,{children:Object(p.jsx)(l.a,{path:"/",element:Object(p.jsx)(S,{}),HOME:!0})})]})})})},T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(E,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");T?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var o=t.headers.get("content-type");404===t.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):_(n,e)}))}}()}},[[80,1,2]]]);
//# sourceMappingURL=main.51f1c7b0.chunk.js.map